import{r as o,j as e}from"./index-DqpGmvOb.js";import{P as p}from"./Profile3D-BsfGYKs8.js";const x="/api",E=()=>{const[s,d]=o.useState(""),[n,m]=o.useState(""),[g,j]=o.useState([]),[l,f]=o.useState(null),u=async()=>{var a;try{const t=localStorage.getItem("email"),c=localStorage.getItem("token");if(!t){console.error("Email is not set in localStorage");return}fetch(`${x}/users/models/getModelsByUser/`+t,{method:"GET",headers:{Authorization:`Bearer ${c}`}}).then(r=>{if(r.ok)return r.json();throw new Error("Failed to fetch user data")}).then(r=>{j(r)})}catch(t){console.error("Error fetching data:",((a=t.response)==null?void 0:a.data)||t)}};o.useEffect(()=>{u()},[]);const N=a=>{d(a.target.value)},C=a=>{m(a.target.value)},S=async a=>{var c;a.preventDefault();const t=localStorage.getItem("email");if(!t){console.error("Email is not set in localStorage");return}try{const r=localStorage.getItem("token");console.log("Token:",r);const h=new FormData;h.append("email",t),h.append("modelName",s),h.append("prompt",n),fetch(`${x}/textTo3D`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({email:t,prompt:n,modelName:s})}).then(i=>{if(i.ok)return i.json();throw new Error("Character creation failed")}).then(i=>{u()}),d(""),m("")}catch(r){console.error("Error creating character:",((c=r.response)==null?void 0:c.data)||r)}},v=a=>{localStorage.setItem("selectedCharacter",a.modelName),f(a),window.location.href="/#/dashboard"};return e.jsx("div",{className:"ai-character-page",children:e.jsxs("div",{className:"ai-character-container",children:[e.jsx("h1",{children:"Customize Your AI Character"}),e.jsxs("form",{onSubmit:S,className:"ai-character-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"character-name",children:"Character Name"}),e.jsx("input",{id:"character-name",placeholder:"Enter the character's name",value:s,onChange:N,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"character-prompt",children:"Character Personality"}),e.jsx("textarea",{id:"character-prompt",placeholder:"Describe how your AI character should act and deliver financial advice...",value:n,onChange:C,rows:"4",required:!0})]}),e.jsx("button",{type:"submit",className:"submit-button",children:"Save Character"})]}),e.jsxs("div",{className:"existing-characters",children:[e.jsx("h2",{children:"Your AI Characters"}),e.jsx("div",{className:"character-list",children:g.map(a=>e.jsxs("div",{className:"character-card",onClick:()=>v(a),children:[e.jsx("h3",{children:a.modelName}),e.jsx(p,{modelName:a.modelName})]},a._id))})]}),l&&e.jsxs("div",{className:"selected-character",children:[e.jsx("h2",{children:"Selected Character"}),e.jsx("h3",{children:l.modelName}),e.jsx(p,{modelName:l.modelName})]})]})})};export{E as default};
